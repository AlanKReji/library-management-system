{% extends 'home.html' %}
{% block content %}
<div class="d-flex justify-content-between align-items-center mt-4">    
    <h1>All Books</h1>
</div>
{% if user.role == 'ADMIN' or user.role == 'LIBRARIAN' %}
<a href="{% url 'addBook' %}" class = "btn btn-primary"> Add Book</a>
{% endif %}
<table class="table table-striped mt-4">
        <thead class="thead-dark">
          <tr>
            <th>S.No.</th>
            <th>Title</th>
            <th>Author</th>
            <th>Available/ Total Copies</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          {% for book in books %}
          <tr>
            <td>{{ forloop.counter }}</td> 
            <td>{{ book.title }}</td>
            <td>{{ book.author }}</td>
            <td>{{ book.available_copies }} / {{ book.total_copies }}</td> 
            
            <td>
                <a href="{% url 'bookDetails' book.id %}"> View </a>
                {% if book.available_copies > 0 and user.role != 'ADMIN' and approved_borrows_count|length < 5 %}
                  | <a href="{% url 'borrowRequest' book.id %}">Borrow</a>
                {% endif %}
            </td>
          </tr>
          {% empty %}
          <tr>
            <td colspan="5" class="text-center">
              No books found.
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
{% endblock %}